# Upgrading to v0.13

## Bump Your Deps

Update Backpex to the latest version:

```elixir
  defp deps do
    [
      {:backpex, "~> 0.13.0"}
    ]
  end
```

## Removed assigns

We have removed a lot of socket assigns from `LiveResource`s. If you depend on them, you can get them via the
`@live_resource` assign which contains the module name of your `LiveResource`.

Before:

```elixir
@schema
@repo
@changeset_function
@singular_name
@plural_name
@full_text_search
```

After:

```elixir
@live_resource.config(:adapter_config)[:schema]
@live_resource.config(:adapter_config)[:repo]
@live_resource.config(:adapter_config)[:update_changeset] # or: :create_changeset
@live_resource.singular_name()
@live_resource.plural_name()
@live_resource.config(:full_text_search)
```

## Modified components

The following components have been modified:

- `Backpex.HTML.Layout.modal/1`

If you use any of these in your project codebase, make sure they work as expected. You may need to change some
attributes (see the component documentation).

## LiveResource is no longer a LiveView

We split the LiveResource module in Backpex to have dedicated LiveViews for `Index`, `Form` (Edit and New) and `Show` views.

The consequence is that your LiveResource module is no longer a LiveView. Therefore, you can no longer define `handle_event`, 
`handle_info` or `handle_params` callbacks or set `on_mount` hooks directly in your LiveResource module.

We are introducing a new `on_mount` LiveResource option that you can use to set `on_mount` hooks. This gives you the flexibility 
to still be able to attach `handle_event`,  `handle_info` or `handle_params` callbacks.

Before:

```elixir
use Backpex.LiveResource,
  ...

@impl Phoenix.LiveView
def handle_event(_params, _url, socket) do
  # Do stuff

  {:cont, socket}
end
```

After:

```elixir
use Backpex.LiveResource,
  ...,
  on_mount: {__MODULE__, :my_hook}

def on_mount(:my_hook, _params, _session, socket) do
  attach_hook(socket, :handle_event_callback, :handle_event, &handle_event/3)

  {:cont, socket}
end

def handle_event(_params, _url, socket) do
  # Do stuff

  {:cont, socket}
end
```

See [on_mount Hook Guide](/guides/live_resource/on_mount-hook.md) for detailed information.
