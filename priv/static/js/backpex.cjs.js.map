{
  "version": 3,
  "sources": ["../../../assets/js/backpex.js", "../../../assets/js/hooks/index.js", "../../../assets/js/hooks/_cancel_entry.js", "../../../assets/js/hooks/_drag_hover.js", "../../../assets/js/hooks/_sidebar_sections.js", "../../../assets/js/hooks/_sticky_actions.js", "../../../assets/js/hooks/_theme_selector.js", "../../../assets/js/hooks/_tooltip.js"],
  "sourcesContent": ["import * as Hooks from './hooks'\n\nexport { Hooks }\n", "export { default as BackpexCancelEntry } from './_cancel_entry'\nexport { default as BackpexDragHover } from './_drag_hover'\nexport { default as BackpexSidebarSections } from './_sidebar_sections'\nexport { default as BackpexStickyActions } from './_sticky_actions'\nexport { default as BackpexThemeSelector } from './_theme_selector'\nexport { default as BackpexTooltip } from './_tooltip'\n", "/**\n * This hook dispatches a form change/input event on the hidden upload field when cancelling an entry.\n * This makes errors validation on upload fields work.\n */\nexport default {\n  mounted () {\n    this.form = this.el.closest('form')\n\n    const uploadKey = this.el.dataset.uploadKey\n    this.handleEvent(`cancel-entry:${uploadKey}`, (e) => { this.dispatchChangeEvent() })\n    this.handleEvent(`cancel-existing-entry:${uploadKey}`, (e) => { this.dispatchChangeEvent() })\n  },\n  dispatchChangeEvent () {\n    if (this.form) {\n      this.el.dispatchEvent(new Event('input', { bubbles: true }))\n    }\n  }\n}\n", "/**\n * This hook adds hover styles on the upload dropzone when dragging a file over it.\n */\nexport default {\n  mounted () {\n    this.dragging = 0\n    this.controller = new AbortController()\n    const signal = this.controller.signal\n\n    this.el.addEventListener('dragenter', () => this.dragChange(this.dragging + 1), { signal })\n    this.el.addEventListener('dragleave', () => this.dragChange(this.dragging - 1), { signal })\n    this.el.addEventListener('drop', () => this.dragChange(0), { signal })\n  },\n  destroyed () {\n    this.controller.abort()\n  },\n  dragChange (value) {\n    this.dragging = value\n    this.el.firstElementChild.classList.toggle('border-primary', this.dragging > 0)\n  }\n}\n", "/**\n * Handles the initial state of all sidebar sections and saves the state to localstorage on toggle.\n */\nexport default {\n  mounted () {\n    this.initializeSections()\n  },\n  updated () {\n    this.initializeSections()\n  },\n  destroyed () {\n    const sections = this.el.querySelectorAll('[data-section-id]')\n\n    sections.forEach(section => {\n      const toggle = section.querySelector('[data-menu-dropdown-toggle]')\n      toggle.removeEventListener('click', this.handleToggle.bind(this))\n    })\n  },\n  hasContent (element) {\n    if (!element || element.children.length === 0) {\n      return false\n    }\n\n    for (const child of element.children) {\n      const childContent = child.querySelector('[data-menu-dropdown-content]')\n\n      if (childContent) {\n        if (this.hasContent(childContent)) {\n          return true\n        }\n      } else {\n        return true\n      }\n    }\n\n    return false\n  },\n  initializeSections () {\n    const sections = this.el.querySelectorAll('[data-section-id]')\n\n    sections.forEach(section => {\n      const sectionId = section.dataset.sectionId\n      const toggle = section.querySelector('[data-menu-dropdown-toggle]')\n      const content = section.querySelector('[data-menu-dropdown-content]')\n\n      if (!this.hasContent(content)) {\n        content.style.display = 'none'\n        return\n      }\n\n      const isOpen = localStorage.getItem(`sidebar-section-${sectionId}`) === 'true'\n      if (!isOpen) {\n        toggle.classList.remove('menu-dropdown-show')\n        content.style.display = 'none'\n      }\n\n      section.classList.remove('hidden')\n\n      toggle.addEventListener('click', this.handleToggle.bind(this))\n    })\n  },\n  handleToggle (event) {\n    const section = event.currentTarget.closest('[data-section-id]')\n    const sectionId = section.dataset.sectionId\n    const toggle = section.querySelector('[data-menu-dropdown-toggle]')\n    const content = section.querySelector('[data-menu-dropdown-content]')\n\n    toggle.classList.toggle('menu-dropdown-show')\n    content.style.display = content.style.display === 'none' ? 'block' : 'none'\n\n    const isNowOpen = toggle.classList.contains('menu-dropdown-show')\n    localStorage.setItem(`sidebar-section-${sectionId}`, isNowOpen)\n  }\n}\n", "/**\n * Hook to determine if a table row is horizontally scrollable (=> actions are sticky).\n *\n * Adds a 'stuck' attribute to the sticky element which can then be used for styling.\n */\nexport default {\n  mounted () {\n    this.sticky = this.el.querySelector('.sticky')\n\n    this.observer = new IntersectionObserver(\n      ([entry]) => {\n        this.stuck = entry.intersectionRatio < 1\n        this.toggleStuckAttribute()\n      },\n      { threshold: [1], root: this.el.closest('.overflow-x-auto') }\n    )\n\n    this.observer.observe(this.el)\n  },\n  updated () {\n    this.toggleStuckAttribute()\n  },\n  destroyed () {\n    this.observer.disconnect()\n  },\n  toggleStuckAttribute () {\n    this.sticky.toggleAttribute('stuck', this.stuck)\n  }\n}\n", "/**\n * Hook for selecting a theme.\n */\nexport default {\n  mounted () {\n    const form = document.querySelector('#backpex-theme-selector-form')\n    const storedTheme = window.localStorage.getItem('backpexTheme')\n\n    // Marking current theme as active\n    if (storedTheme != null) {\n      const activeThemeRadio = form.querySelector(\n        `input[name='theme-selector'][value='${storedTheme}']`\n      )\n      activeThemeRadio.checked = true\n    }\n\n    window.addEventListener('backpex:theme-change', this.handleThemeChange.bind(this))\n  },\n  // Event listener that handles the theme changes and store\n  // the selected theme in the session and also in localStorage\n  async handleThemeChange () {\n    const form = document.querySelector('#backpex-theme-selector-form')\n    const csrfToken = document.querySelector(\"meta[name='csrf-token']\").getAttribute('content')\n    const cookiePath = form.dataset.cookiePath\n    const selectedTheme = form.querySelector(\n      'input[name=\"theme-selector\"]:checked'\n    )\n\n    if (selectedTheme) {\n      window.localStorage.setItem('backpexTheme', selectedTheme.value)\n      document.documentElement.setAttribute(\n        'data-theme',\n        selectedTheme.value\n      )\n      await fetch(cookiePath, {\n        body: `select_theme=${selectedTheme.value}`,\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/x-www-form-urlencoded',\n          'x-csrf-token': csrfToken\n        }\n      })\n    }\n  },\n  // Call this from your app.js as soon as possible to minimize flashes with the old theme in some situations.\n  setStoredTheme () {\n    const storedTheme = window.localStorage.getItem('backpexTheme')\n\n    if (storedTheme != null) {\n      document.documentElement.setAttribute('data-theme', storedTheme)\n    }\n  },\n  destroyed () {\n    window.removeEventListener('backpex:theme-change', this.handleThemeChange.bind(this))\n  }\n}\n", "/**\n * This hooks displays a statically positioned tooltip which is not affected by parent elements and their overflow.\n */\nexport default {\n  mounted () {\n    this.tooltip = null\n    this.controller = new AbortController()\n    const signal = this.controller.signal\n\n    this.el.addEventListener('mouseenter', () => {\n      const text = this.el.getAttribute('data-tooltip')\n      if (!text) return\n\n      this.tooltip = document.createElement('div')\n      this.tooltip.innerText = text\n      this.tooltip.className = `\n        fixed z-50 -translate-x-1/2 px-2 py-1 bg-neutral rounded-field\n        text-neutral-content text-sm shadow-sm whitespace-nowrap\n        before:content-['']\n        before:absolute before:w-0 before:h-0 before:left-1/2 before:-translate-x-1/2 before:top-full\n        before:border-l-4 before:border-r-4 before:border-t-4 before:border-transparent before:border-t-neutral\n      `\n\n      document.body.appendChild(this.tooltip)\n      this.updateTooltipPosition()\n    }, { signal })\n\n    this.el.addEventListener('mouseleave', () => {\n      if (this.tooltip) {\n        this.tooltip.remove()\n        this.tooltip = null\n      }\n    }, { signal })\n\n    window.addEventListener('scroll', () => { this.updateTooltipPosition() }, { signal })\n  },\n  destroyed () {\n    this.controller.abort()\n\n    if (this.tooltip) {\n      this.tooltip.remove()\n    }\n  },\n  updateTooltipPosition () {\n    if (!this.tooltip) return\n\n    const rect = this.el.getBoundingClientRect()\n    this.tooltip.style.left = `${rect.left + rect.width / 2}px`\n    this.tooltip.style.top = `${rect.top - this.tooltip.offsetHeight - 6}px`\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACIA,IAAO,uBAAQ;AAAA,EACb,UAAW;AACT,SAAK,OAAO,KAAK,GAAG,QAAQ,MAAM;AAElC,UAAM,YAAY,KAAK,GAAG,QAAQ;AAClC,SAAK,YAAY,gBAAgB,SAAS,IAAI,CAAC,MAAM;AAAE,WAAK,oBAAoB;AAAA,IAAE,CAAC;AACnF,SAAK,YAAY,yBAAyB,SAAS,IAAI,CAAC,MAAM;AAAE,WAAK,oBAAoB;AAAA,IAAE,CAAC;AAAA,EAC9F;AAAA,EACA,sBAAuB;AACrB,QAAI,KAAK,MAAM;AACb,WAAK,GAAG,cAAc,IAAI,MAAM,SAAS,EAAE,SAAS,KAAK,CAAC,CAAC;AAAA,IAC7D;AAAA,EACF;AACF;;;ACdA,IAAO,qBAAQ;AAAA,EACb,UAAW;AACT,SAAK,WAAW;AAChB,SAAK,aAAa,IAAI,gBAAgB;AACtC,UAAM,SAAS,KAAK,WAAW;AAE/B,SAAK,GAAG,iBAAiB,aAAa,MAAM,KAAK,WAAW,KAAK,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC;AAC1F,SAAK,GAAG,iBAAiB,aAAa,MAAM,KAAK,WAAW,KAAK,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC;AAC1F,SAAK,GAAG,iBAAiB,QAAQ,MAAM,KAAK,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC;AAAA,EACvE;AAAA,EACA,YAAa;AACX,SAAK,WAAW,MAAM;AAAA,EACxB;AAAA,EACA,WAAY,OAAO;AACjB,SAAK,WAAW;AAChB,SAAK,GAAG,kBAAkB,UAAU,OAAO,kBAAkB,KAAK,WAAW,CAAC;AAAA,EAChF;AACF;;;ACjBA,IAAO,2BAAQ;AAAA,EACb,UAAW;AACT,SAAK,mBAAmB;AAAA,EAC1B;AAAA,EACA,UAAW;AACT,SAAK,mBAAmB;AAAA,EAC1B;AAAA,EACA,YAAa;AACX,UAAM,WAAW,KAAK,GAAG,iBAAiB,mBAAmB;AAE7D,aAAS,QAAQ,aAAW;AAC1B,YAAM,SAAS,QAAQ,cAAc,6BAA6B;AAClE,aAAO,oBAAoB,SAAS,KAAK,aAAa,KAAK,IAAI,CAAC;AAAA,IAClE,CAAC;AAAA,EACH;AAAA,EACA,WAAY,SAAS;AACnB,QAAI,CAAC,WAAW,QAAQ,SAAS,WAAW,GAAG;AAC7C,aAAO;AAAA,IACT;AAEA,eAAW,SAAS,QAAQ,UAAU;AACpC,YAAM,eAAe,MAAM,cAAc,8BAA8B;AAEvE,UAAI,cAAc;AAChB,YAAI,KAAK,WAAW,YAAY,GAAG;AACjC,iBAAO;AAAA,QACT;AAAA,MACF,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EACA,qBAAsB;AACpB,UAAM,WAAW,KAAK,GAAG,iBAAiB,mBAAmB;AAE7D,aAAS,QAAQ,aAAW;AAC1B,YAAM,YAAY,QAAQ,QAAQ;AAClC,YAAM,SAAS,QAAQ,cAAc,6BAA6B;AAClE,YAAM,UAAU,QAAQ,cAAc,8BAA8B;AAEpE,UAAI,CAAC,KAAK,WAAW,OAAO,GAAG;AAC7B,gBAAQ,MAAM,UAAU;AACxB;AAAA,MACF;AAEA,YAAM,SAAS,aAAa,QAAQ,mBAAmB,SAAS,EAAE,MAAM;AACxE,UAAI,CAAC,QAAQ;AACX,eAAO,UAAU,OAAO,oBAAoB;AAC5C,gBAAQ,MAAM,UAAU;AAAA,MAC1B;AAEA,cAAQ,UAAU,OAAO,QAAQ;AAEjC,aAAO,iBAAiB,SAAS,KAAK,aAAa,KAAK,IAAI,CAAC;AAAA,IAC/D,CAAC;AAAA,EACH;AAAA,EACA,aAAc,OAAO;AACnB,UAAM,UAAU,MAAM,cAAc,QAAQ,mBAAmB;AAC/D,UAAM,YAAY,QAAQ,QAAQ;AAClC,UAAM,SAAS,QAAQ,cAAc,6BAA6B;AAClE,UAAM,UAAU,QAAQ,cAAc,8BAA8B;AAEpE,WAAO,UAAU,OAAO,oBAAoB;AAC5C,YAAQ,MAAM,UAAU,QAAQ,MAAM,YAAY,SAAS,UAAU;AAErE,UAAM,YAAY,OAAO,UAAU,SAAS,oBAAoB;AAChE,iBAAa,QAAQ,mBAAmB,SAAS,IAAI,SAAS;AAAA,EAChE;AACF;;;ACpEA,IAAO,yBAAQ;AAAA,EACb,UAAW;AACT,SAAK,SAAS,KAAK,GAAG,cAAc,SAAS;AAE7C,SAAK,WAAW,IAAI;AAAA,MAClB,CAAC,CAAC,KAAK,MAAM;AACX,aAAK,QAAQ,MAAM,oBAAoB;AACvC,aAAK,qBAAqB;AAAA,MAC5B;AAAA,MACA,EAAE,WAAW,CAAC,CAAC,GAAG,MAAM,KAAK,GAAG,QAAQ,kBAAkB,EAAE;AAAA,IAC9D;AAEA,SAAK,SAAS,QAAQ,KAAK,EAAE;AAAA,EAC/B;AAAA,EACA,UAAW;AACT,SAAK,qBAAqB;AAAA,EAC5B;AAAA,EACA,YAAa;AACX,SAAK,SAAS,WAAW;AAAA,EAC3B;AAAA,EACA,uBAAwB;AACtB,SAAK,OAAO,gBAAgB,SAAS,KAAK,KAAK;AAAA,EACjD;AACF;;;ACzBA,IAAO,yBAAQ;AAAA,EACb,UAAW;AACT,UAAM,OAAO,SAAS,cAAc,8BAA8B;AAClE,UAAM,cAAc,OAAO,aAAa,QAAQ,cAAc;AAG9D,QAAI,eAAe,MAAM;AACvB,YAAM,mBAAmB,KAAK;AAAA,QAC5B,uCAAuC,WAAW;AAAA,MACpD;AACA,uBAAiB,UAAU;AAAA,IAC7B;AAEA,WAAO,iBAAiB,wBAAwB,KAAK,kBAAkB,KAAK,IAAI,CAAC;AAAA,EACnF;AAAA;AAAA;AAAA,EAGA,MAAM,oBAAqB;AACzB,UAAM,OAAO,SAAS,cAAc,8BAA8B;AAClE,UAAM,YAAY,SAAS,cAAc,yBAAyB,EAAE,aAAa,SAAS;AAC1F,UAAM,aAAa,KAAK,QAAQ;AAChC,UAAM,gBAAgB,KAAK;AAAA,MACzB;AAAA,IACF;AAEA,QAAI,eAAe;AACjB,aAAO,aAAa,QAAQ,gBAAgB,cAAc,KAAK;AAC/D,eAAS,gBAAgB;AAAA,QACvB;AAAA,QACA,cAAc;AAAA,MAChB;AACA,YAAM,MAAM,YAAY;AAAA,QACtB,MAAM,gBAAgB,cAAc,KAAK;AAAA,QACzC,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,gBAAgB;AAAA,QAClB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA,EAEA,iBAAkB;AAChB,UAAM,cAAc,OAAO,aAAa,QAAQ,cAAc;AAE9D,QAAI,eAAe,MAAM;AACvB,eAAS,gBAAgB,aAAa,cAAc,WAAW;AAAA,IACjE;AAAA,EACF;AAAA,EACA,YAAa;AACX,WAAO,oBAAoB,wBAAwB,KAAK,kBAAkB,KAAK,IAAI,CAAC;AAAA,EACtF;AACF;;;ACpDA,IAAO,kBAAQ;AAAA,EACb,UAAW;AACT,SAAK,UAAU;AACf,SAAK,aAAa,IAAI,gBAAgB;AACtC,UAAM,SAAS,KAAK,WAAW;AAE/B,SAAK,GAAG,iBAAiB,cAAc,MAAM;AAC3C,YAAM,OAAO,KAAK,GAAG,aAAa,cAAc;AAChD,UAAI,CAAC,KAAM;AAEX,WAAK,UAAU,SAAS,cAAc,KAAK;AAC3C,WAAK,QAAQ,YAAY;AACzB,WAAK,QAAQ,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQzB,eAAS,KAAK,YAAY,KAAK,OAAO;AACtC,WAAK,sBAAsB;AAAA,IAC7B,GAAG,EAAE,OAAO,CAAC;AAEb,SAAK,GAAG,iBAAiB,cAAc,MAAM;AAC3C,UAAI,KAAK,SAAS;AAChB,aAAK,QAAQ,OAAO;AACpB,aAAK,UAAU;AAAA,MACjB;AAAA,IACF,GAAG,EAAE,OAAO,CAAC;AAEb,WAAO,iBAAiB,UAAU,MAAM;AAAE,WAAK,sBAAsB;AAAA,IAAE,GAAG,EAAE,OAAO,CAAC;AAAA,EACtF;AAAA,EACA,YAAa;AACX,SAAK,WAAW,MAAM;AAEtB,QAAI,KAAK,SAAS;AAChB,WAAK,QAAQ,OAAO;AAAA,IACtB;AAAA,EACF;AAAA,EACA,wBAAyB;AACvB,QAAI,CAAC,KAAK,QAAS;AAEnB,UAAM,OAAO,KAAK,GAAG,sBAAsB;AAC3C,SAAK,QAAQ,MAAM,OAAO,GAAG,KAAK,OAAO,KAAK,QAAQ,CAAC;AACvD,SAAK,QAAQ,MAAM,MAAM,GAAG,KAAK,MAAM,KAAK,QAAQ,eAAe,CAAC;AAAA,EACtE;AACF;",
  "names": []
}
