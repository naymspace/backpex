var LiveView=(()=>{var d=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var h=(e,t)=>{for(var o in t)d(e,o,{get:t[o],enumerable:!0})},S=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of v(t))!k.call(e,s)&&s!==o&&d(e,s,{get:()=>t[s],enumerable:!(n=w(t,s))||n.enumerable});return e};var E=e=>S(d({},"__esModule",{value:!0}),e);var u=(e,t,o)=>new Promise((n,s)=>{var r=i=>{try{l(o.next(i))}catch(a){s(a)}},x=i=>{try{l(o.throw(i))}catch(a){s(a)}},l=i=>i.done?n(i.value):Promise.resolve(i.value).then(r,x);l((o=o.apply(e,t)).next())});var T={};h(T,{Hooks:()=>c});var c={};h(c,{BackpexCancelEntry:()=>p,BackpexDragHover:()=>g,BackpexSidebarSections:()=>m,BackpexStickyActions:()=>f,BackpexThemeSelector:()=>b,BackpexTooltip:()=>y});var p={mounted(){this.form=this.el.closest("form");let e=this.el.dataset.uploadKey;this.handleEvent(`cancel-entry:${e}`,t=>{this.dispatchChangeEvent()}),this.handleEvent(`cancel-existing-entry:${e}`,t=>{this.dispatchChangeEvent()})},dispatchChangeEvent(){this.form&&this.el.dispatchEvent(new Event("input",{bubbles:!0}))}};var g={mounted(){this.dragging=0,this.controller=new AbortController;let e=this.controller.signal;this.el.addEventListener("dragenter",()=>this.dragChange(this.dragging+1),{signal:e}),this.el.addEventListener("dragleave",()=>this.dragChange(this.dragging-1),{signal:e}),this.el.addEventListener("drop",()=>this.dragChange(0),{signal:e})},destroyed(){this.controller.abort()},dragChange(e){this.dragging=e,this.el.firstElementChild.classList.toggle("border-primary",this.dragging>0)}};var m={mounted(){this.initializeSections()},updated(){this.initializeSections()},destroyed(){this.el.querySelectorAll("[data-section-id]").forEach(t=>{t.querySelector("[data-menu-dropdown-toggle]").removeEventListener("click",this.handleToggle.bind(this))})},hasContent(e){if(!e||e.children.length===0)return!1;for(let t of e.children){let o=t.querySelector("[data-menu-dropdown-content]");if(o){if(this.hasContent(o))return!0}else return!0}return!1},initializeSections(){this.el.querySelectorAll("[data-section-id]").forEach(t=>{let o=t.dataset.sectionId,n=t.querySelector("[data-menu-dropdown-toggle]"),s=t.querySelector("[data-menu-dropdown-content]");if(!this.hasContent(s)){s.style.display="none";return}localStorage.getItem(`sidebar-section-${o}`)==="true"||(n.classList.remove("menu-dropdown-show"),s.style.display="none"),t.classList.remove("hidden"),n.addEventListener("click",this.handleToggle.bind(this))})},handleToggle(e){let t=e.currentTarget.closest("[data-section-id]"),o=t.dataset.sectionId,n=t.querySelector("[data-menu-dropdown-toggle]"),s=t.querySelector("[data-menu-dropdown-content]");n.classList.toggle("menu-dropdown-show"),s.style.display=s.style.display==="none"?"block":"none";let r=n.classList.contains("menu-dropdown-show");localStorage.setItem(`sidebar-section-${o}`,r)}};var f={mounted(){this.sticky=this.el.querySelector(".sticky"),this.observer=new IntersectionObserver(([e])=>{this.stuck=e.intersectionRatio<1,this.toggleStuckAttribute()},{threshold:[1],root:this.el.closest(".overflow-x-auto")}),this.observer.observe(this.el)},updated(){this.toggleStuckAttribute()},destroyed(){this.observer.disconnect()},toggleStuckAttribute(){this.sticky.toggleAttribute("stuck",this.stuck)}};var b={mounted(){let e=document.querySelector("#backpex-theme-selector-form"),t=window.localStorage.getItem("backpexTheme");if(t!=null){let o=e.querySelector(`input[name='theme-selector'][value='${t}']`);o.checked=!0}window.addEventListener("backpex:theme-change",this.handleThemeChange.bind(this))},handleThemeChange(){return u(this,null,function*(){let e=document.querySelector("#backpex-theme-selector-form"),t=document.querySelector("meta[name='csrf-token']").getAttribute("content"),o=e.dataset.cookiePath,n=e.querySelector('input[name="theme-selector"]:checked');n&&(window.localStorage.setItem("backpexTheme",n.value),document.documentElement.setAttribute("data-theme",n.value),yield fetch(o,{body:`select_theme=${n.value}`,method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded","x-csrf-token":t}}))})},setStoredTheme(){let e=window.localStorage.getItem("backpexTheme");e!=null&&document.documentElement.setAttribute("data-theme",e)},destroyed(){window.removeEventListener("backpex:theme-change",this.handleThemeChange.bind(this))}};var y={mounted(){this.tooltip=null,this.controller=new AbortController;let e=this.controller.signal;this.el.addEventListener("mouseenter",()=>{let t=this.el.getAttribute("data-tooltip");t&&(this.tooltip=document.createElement("div"),this.tooltip.innerText=t,this.tooltip.className=`
        fixed z-50 -translate-x-1/2 px-2 py-1 bg-neutral rounded-field
        text-neutral-content text-sm shadow-sm whitespace-nowrap
        before:content-['']
        before:absolute before:w-0 before:h-0 before:left-1/2 before:-translate-x-1/2 before:top-full
        before:border-l-4 before:border-r-4 before:border-t-4 before:border-transparent before:border-t-neutral
      `,document.body.appendChild(this.tooltip),this.updateTooltipPosition())},{signal:e}),this.el.addEventListener("mouseleave",()=>{this.tooltip&&(this.tooltip.remove(),this.tooltip=null)},{signal:e}),window.addEventListener("scroll",()=>{this.updateTooltipPosition()},{signal:e})},destroyed(){this.controller.abort(),this.tooltip&&this.tooltip.remove()},updateTooltipPosition(){if(!this.tooltip)return;let e=this.el.getBoundingClientRect();this.tooltip.style.left=`${e.left+e.width/2}px`,this.tooltip.style.top=`${e.top-this.tooltip.offsetHeight-6}px`}};return E(T);})();
